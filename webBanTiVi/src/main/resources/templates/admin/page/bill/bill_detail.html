<html xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" href="/admin/plugin/css/invoice_detail.css">
<div class="page-header">
    <div class="row">
        <h4 class="fw-bold py-3 mb-4 col-5">Bill details</h4>
        <div class="col-7 text-end">
            <button type="button" class="btn btn-primary col-3" onclick="window.history.back()">
                <span class="tf-icons bx bx-arrow-back mx-1"></span>Go back
            </button>
            <button type="button" class="btn btn-danger col-3">
                <span class="tf-icons bx bx-printer mx-1"></span>Print bill
            </button>
        </div>
    </div>
</div>
<div class="row">
    <!--    sản phẩm, phiếu giao-->
    <div class="col-lg-8 col-md-8 order-0">
        <div class="row">
            <!--            Sản phẩm-->
            <form th:action="@{/admin/bill/bill_detail}" method="post" th:object="${billDetail}">
                <div class="card">
                    <div class="card-body">
                        <span class="card-title mt-3 text-danger">
                             <b>Mã đơn:</b> <i>[(*{code})]</i> <b>|</b><i
                                th:text="|${#lists.size(billDetail.billProducts)} sản phẩm|"></i>
                        </span>
                        <div class="row select-order mb-3" th:each="billProduct: *{billProducts}">
                            <hr>
                            <div class="col-4 col-md-5 col-xl-4">
                                <img th:each="image:${billProduct.product.listImage}"
                                     th:src="@{'/image/'+ ${image.location == true ? image.nameImage:''}}" src=""
                                     class="w-px-200" alt="Lỗi hiển thị">
                            </div>
                            <div class="col-8 col-md-7 col-xl-8">
                                <div class="col-12 mb-4 fs-4"><p><b>Tên sản phẩm:</b>
                                    <a th:href="@{/admin/product/abcxyz}" class="text-decoration-none">[(${billProduct.product.name})]</a>
                                </p></div>
                                <div class="row mb-4">
                                    <span class="col-8 text-left"><b>Số lượng:</b></span>
                                    <span class="col-4 text-end"> [(${billProduct.quantity})]</span>
                                </div>
                                <div class="row mb-4">
                                    <span class="col-7 text-start"><b>Giá sản phẩm:</b></span>
                                    <span class="col-5 text-end"> [(${#numbers.formatDecimal(billProduct.quantity * billProduct.price, 0,'COMMA',2,'POINT')})]<u>đ</u></span>
                                </div>
                                <div class="row mb-4">
                                    <span class="col-7 text-start"><b>Giá sau khuyến mãi:</b></span>
                                    <span class="col-5 text-end"> 9000000<u>đ</u></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <!--          Phiếu giao-->
            <div class="nav-align-top mb-4 mt-3">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <button type="button" class="nav-link active" role="tab" data-bs-toggle="tab"
                                data-bs-target="#navs-top-info-customer" aria-controls="navs-top-home"
                                aria-selected="true">
                            Thông tin khách hàng
                        </button>
                    </li>
                    <li class="nav-item">
                        <button type="button" class="nav-link" role="tab" data-bs-toggle="tab"
                                data-bs-target="#navs-top-image-video-returns" aria-controls="navs-top-messages"
                                aria-selected="false">
                            Ảnh/Video trả hàng
                        </button>
                    </li>
                </ul>
                <div class="tab-content" style="z-index: initial">
                    <div class="tab-pane fade active show" id="navs-top-info-customer" role="tabpanel">
                        <!--                     thông tin khách hàng-->
                        <form th:action="@{/admin/bill/bill_detail/delivery_note}" method="post">
                            <div class="row">
                                <h4 class="fw-bold text-start col-6 col-md-6">Đơn từ web</h4>
                                <div class="col-6 col-md-6 text-end">
                                    <button class="btn btn-warning" type="button" id="btnEditInfo">Chỉnh sửa</button>
                                    <!--                                    <button class="btn btn-dark" type="button" id="btnCancel">Hủy</button>-->
                                    <button class="btn btn-success display-none" type="button" id="btnSave"
                                            name="editInfo"
                                            style="display: none">Lưu
                                    </button>
                                    <button class="btn btn-dark display-none" type="button" id="btnCancel"
                                            name="editInfo"
                                            style="display:none;">Hủy
                                    </button>

                                </div>
                            </div>
                            <hr>
                            <div class="table-responsive text-wrap">
                                <table class="table table-bordered">
                                    <tbody>
                                    <tr>
                                        <td><strong>Tên khách hàng:</strong>
                                        </td>
                                        <td>
                                            <input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="nameCustomer"
                                                   style="display: none">
                                            <p id="nameText">phạm oanh</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>SĐT khách hàng:</strong>
                                        </td>
                                        <td>
                                            <input class="form-check form-control w-100" type="text" value="Oanh"
                                                   id="phoneCustomer"
                                                   style="display: none">
                                            <p id="phoneText">12345577</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Tên người nhận:</strong>
                                        </td>
                                        <td>
                                            <input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="deliver"
                                                   style="display: none">
                                            <p id="deliverText">Phạm Oanh</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>SĐT người nhận:</strong>
                                        </td>
                                        <td><input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="phoneDeliver"
                                                   style="display: none">
                                            <p id="phoneDeliverText">12345678</p></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Địa chỉ người nhận:</strong>
                                        </td>
                                        <td>
                                            <input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="addressDeliver"
                                                   style="display: none">
                                            <p id="addressDeliverText">Liên Trì 1, Xã Yên Hòa, Huyện Yên Mô, Tỉnh Ninh
                                                Bình</p></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Email:</strong>
                                        </td>
                                        <td><input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="emailCustomer"
                                                   style="display: none">
                                            <p id="emailCustomerText">opham084@gmail.com</p></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Phí giao hàng:</strong>
                                        </td>
                                        <td><input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="deliveryFee"
                                                   style="display: none">
                                            <p id="deliveryFeeText">10000000</p></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Ghi chú:</strong>
                                        </td>
                                        <td><input class="form-check form-control w-100" type="text" th:value="${oanh}"
                                                   id="note"
                                                   style="display: none">
                                            <p id="noteText">opham084@gmail.com</p></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="navs-top-image-video-returns" role="tabpanel">
                        <small>(Click tên sản phẩm để hiển thị hình ảnh)</small>
                        <div class="me-1" type="button" data-bs-toggle="collapse"
                             data-bs-target="#collapseExample"
                             aria-expanded="true" aria-controls="collapseExample">
                            <strong>Tên sản phẩm:</strong> Tivi LG 230 Lưu ý rằng phiên bản của DatePicker. <br>
                            <strong>Số lượng: </strong> <span>1</span>
                        </div>
                        <div class="collapse" id="collapseExample" style="">
                            <div class="d-grid d-sm-flex p-3 border">
                                <div class="row mt-4">
                                    <div class="col-4">
                                        <img th:src="@{/admin/assets/img/elements/11.jpg}" src=""
                                             data-bs-toggle="modal"
                                             data-bs-target="#maTraHang"
                                             style="width: 90%" alt="">
                                        <div class="modal fade" id="maTraHang" tabindex="-1" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog" role="document">
                                                <div class="modal-content"
                                                     style="background-color: transparent; box-shadow: none">
                                                    <div class="col-md">
                                                        <div id="carouselExample" class="carousel"
                                                             data-bs-ride="carousel">
                                                            <div class="px-5">
                                                                <ol class="carousel-indicators">
                                                                    <li data-bs-target="#carouselExample"
                                                                        data-bs-slide-to="0" class=""></li>
                                                                </ol>
                                                                <div class="carousel-inner">
                                                                    <div class="carousel-item">
                                                                        <video class="d-block w-100 " controls>
                                                                            <source th:src="@{/admin/assets/img/elements/WIN_20230905_12_44_01_Pro.mp4}"
                                                                            >
                                                                        </video>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <a class="carousel-control-prev"
                                                               href="#carouselExample"
                                                               role="button" data-bs-slide="prev">
                                                                    <span class="carousel-control-prev-icon"
                                                                          aria-hidden="true"></span>
                                                                <span class="visually-hidden">Previous</span>
                                                            </a>
                                                            <a class="carousel-control-next"
                                                               href="#carouselExample"
                                                               role="button" data-bs-slide="next">
                                                                    <span class="carousel-control-next-icon"
                                                                          aria-hidden="true"></span>
                                                                <span class="visually-hidden">Next</span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Trạng thái đơn hàng, thanh toán-->
    <div class="col-lg-4 col-md-4 mb-4 order-1">
        <form th:action="@{/admin/bill/bill_detail/update_status/{id}(id=${billDetail.id})}" method="get"
              id="formStatus">
            <div class="card mb-4">
                <div class="card-body">
                    <div class="form-label"> Trạng thái đơn hàng</div>
                    <div class="list-group list-group-flush">
                        <select class="form-select list-group list-group-flush select2" id="billStatus" name="status"
                                th:field="${billDetail.billStatus.code}">
                            <option value="WP" th:selected="${'WP'== billDetail.billStatus.code  }">Chờ xử lý
                            </option>
                            <option value="PG" th:selected="${'PG' == billDetail.billStatus.code}">Đang chuẩn bị
                                hàng
                            </option>
                            <option value="OS" th:selected="${'OS' == billDetail.billStatus.code}">Hết hàng</option>
                            <option value="DE" th:selected="${'DE' == billDetail.billStatus.code}">Đang giao hàng
                            </option>
                            <option value="DEE" th:selected="${'DEE' == billDetail.billStatus.code}">Lỗi giao hàng
                            </option>
                            <option value="CO" th:selected="${'CO' == billDetail.billStatus.code}">Đã hoàn thành
                            </option>
                            <option value="SC" th:selected="${'SC' == billDetail.billStatus.code}">Shop hủy</option>
                            <option value="CC" th:selected="${'CC' == billDetail.billStatus.code}">Khách hủy
                            </option>
                            <option value="RR" th:selected="${'RR' == billDetail.billStatus.code}">Yêu cầu trả
                                hàng
                            </option>
                            <option value="WR" th:selected="${'WR' == billDetail.billStatus.code}">Chờ trả hàng
                            </option>
                            <option value="RE" th:selected="${'RE' == billDetail.billStatus.code}">Đã trả hàng
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-body">
                    <div class="form-label"> Trạng thái thanh toán</div>
                    <div class="list-group list-group-flush">
                        <select class="form-select list-group list-group-flush select2" name="payment"
                                th:field="${billDetail.paymentStatus}"
                                id="paymentStatus">
                            <option value="1">Đã thanh toán</option>
                            <option value="2">Chưa thanh toán</option>
                            <option value="3">Đã hoàn tiền</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="d-flex align-items-end row">
                    <div class="card-body">
                    <span class="card-title mt-3 mb-3">
                         <b>Tổng tiền</b>
                    </span>
                        <div class="mb-3 row">
                            <hr>
                            <div class="mb-2">
                                <div class="row">
                                    <label class="col-5 col-md-5"><b class="text-start">Tổng:</b></label>
                                    <span class="text-end col-7 col-md-7">1000000<u>đ</u></span>
                                </div>
                                <small class="col-12 col-md-12"
                                       th:text="|(${#lists.size(billDetail.billProducts)} sản phẩm)|"></small>
                            </div>
                            <div class="mb-2">
                                <div class="row">
                                    <label class="col-6 col-md-6"><b class="text-start">Giảm giá:</b></label>
                                    <span class="text-end col-6 col-md-6">-1000000<u>đ</u></span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="row">
                                    <label class="col-6 col-md-6"><b class="text-start">Voucher:</b></label>
                                    <span class="text-end col-6 col-md-6">-1000000<u>đ</u></span>
                                </div>
                            </div>
                            <hr>
                            <div class="mt-2 mb-2">
                                <div class="row">
                                    <label class="col-6 col-md-6"><b class="text-start">Voucher:</b></label>
                                    <span class="text-end col-6 col-md-6">-1000000<u>đ</u></span>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="form-check form-check-inline mt-3">
                                    <input class="form-check-input" type="radio" name="paymentMethod"
                                           id="inlineRadio1"
                                           value="option1">
                                    <label class="form-check-label" for="inlineRadio1">Tiền mặt</label>
                                </div>
                                <div class="form-check form-check-inline mt-3">
                                    <input class="form-check-input" type="radio" name="paymentMethod"
                                           id="inlineRadio2"
                                           value="option2">
                                    <label class="form-check-label" for="inlineRadio2">Chuyển khoản Vnpay</label>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button class="btn btn-warning mt-4 ">Thanh toán</button>
                            </div>
                            <!--                        <div class="col-12 text-center">-->
                            <!--                            <button class="btn btn-danger mt-4 ">Hoàn tiền</button>-->
                            <!--                        </div>-->
                            <!--                        <div class="col-12 text-center">-->
                            <!--                            <button class="btn btn-dark mt-4 ">Hủy</button>-->
                            <!--                        </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="/admin/plugin/js/bill_detail.js"></script>
</html>